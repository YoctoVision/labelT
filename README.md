
# YOLO Annotation Tool

这是一个基于 Python 和 PyQt5 的 YOLO 标注工具，支持图片上传、编辑、裁剪和标注功能。用户可以通过拖曳或点击上传图片，进入标注模式后绘制矩形框，选择类别并输入描述，最终保存为 YOLO 格式的标注文件、裁剪后的图片和 Markdown 描述文件。

## 功能

- **图片上传**：支持拖曳或点击上传图片（.jpg 或 .png），上传后全屏显示。
- **图片编辑**：
  - 放大、缩小和按比例拖曳图片。
  - 支持裁剪，裁剪框大小为 320x320、480x480、640x640，用户可拖动调整位置。
- **标注模式**：
  - 点击“标注 -> 开始标注”进入标注模式，禁用图片编辑功能。
  - 提供文件名输入框、类别下拉框（从 `data.yaml` 读取）和描述文本框（支持富文本，保存为 Markdown）。
  - 支持鼠标拖拽绘制矩形框，点击“重设”清除标注，点击“确定”保存。
- **保存**：保存为三个文件：
  - `filename.img`：裁剪后的图片。
  - `filename.txt`：YOLO 格式标注（`class_id x y w h`）。
  - `filename.md`：Markdown 格式的描述。
- **配置文件**：从 `data.yaml` 读取类别信息，填充下拉框。

## 依赖

- Python 3.6+
- 依赖库（见 `requirements.txt`）：
  - PyQt5：GUI 框架
  - pyyaml：解析 `data.yaml`
  - html2text：富文本转 Markdown


## 安装

Install the required packages using the provided `requirements.txt`:
```bash
pip install -r requirements.txt
python main.py
```

## Grok prompt

请实现一个界面, 用来实现yolo的标记工具, 具体需求如下:
1. 使用python语言, qt框架, 注释使用英文, 回复使用中文
2. 默认界面中心就是一个大框, 里面支持拖曳一个图片或者点击上传一张图片
3. 如果点击或者上传图片成功后, 整个界面就变成了 这张图片的展示
4. 菜单下边有 支持图片的 放大\缩小\按比例拖曳以及裁剪按钮, 默认裁剪矩形框为640*640大小, 还支持320*320, 480*480大小, 共三个选项, 用户可以挪动框来实现裁剪. 
5. 菜单栏下边有一个按钮 "标记", 点击标记后, 则进入标记模式:
    5.1. 图片不可再编辑, 也就是放大缩小/裁剪等菜单隐藏或灰化进入不可编辑模式
    5.2. 有一个输入框, 名字是: 文件名. 用来输入保存的文件名
    5.3. 有一个输入框, 用来选择类别, 具体类别信息需要读取 当前目录下的 data.yaml 文件里面的 names 数组, 具体参考附件: data.yaml(也就是初始化的时候需要读取该配置文件, 将类别数nc和类别信息读取出来, 这以供这里下拉选择). 选择后, 实际保存的是其id下标
    5.4. 有一个文本框, 支持输入介绍信息, 框大概10-15行大小, 尽量支持富文本编辑, 但生成的格式是 markdown
    5.5. 支持对图片进行标记, 也就是一个矩形框, 有一个重设\确定两个按钮, 重设则重新标记, 确定则保存具体信息
    5.6 点击确定后, 则保存为3个文件, 假设文件名(前面输入框里面填写的)为 filename, 则3个文件分别为: filename.img(保存裁剪后的图片), filename.txt(标记文件, 格式见下面介绍), filename.md(介绍文件, 用来保存5.4中文本框的内容, 格式为markdown)
6. filename.txt标记文件格式: classid, x, y, w, h, classid表示分类id, 也就是5.3选择的id下标(通过读取data.yaml的数组下标获得), x y w h 就是yolo标记常见风格,如: 4 0.49399038461538464 0.47836538461538464 0.10576923076923077 0.15264423076923078
7. 请提供一份 requirements.txt 文件
8. 请自行决定是否需要分为多个 .py 文件或目录
8. 请提供一份markdown文件, 使用中文, 用来介绍各文件\目录功能, 以及安装等其他介绍信息